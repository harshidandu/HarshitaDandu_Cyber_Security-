# Malware Analysis Lab

## Objective

The Malware Analysis project aimed to build a comprehensive lab environment for performing static and dynamic analysis on malicious software samples. The primary goal was to safely inspect malware behavior, identify attack signatures, and understand persistence mechanisms within an isolated virtual machine environment. This practical experience was intended to enhance proficiency in cybersecurity practices, specifically in malware detection, analysis, and defensive response.

### Skills Learned

- Advanced setup and management of virtual environments using VirtualBox.
- Proficiency in configuring and utilizing Flare VM and associated malware analysis tools.
- Expertise in static malware analysis techniques, including file signature verification, hashing, and string extraction.
- Competency in dynamic malware analysis by monitoring processes, network traffic, registry changes, and file system activities.
- Practical application of cybersecurity best practices, including safe analysis procedures and snapshot management.

### Tools Used

- **VirtualBox**: Creation and management of virtual machine environments.
- **Flare VM**: Malware analysis toolkit installation for comprehensive analytical capabilities.
- **HxD, HashMyFiles, PE Studio**: Static analysis for identifying file types, signatures, and unpacking malware.
- **Wireshark, Fiddler**: Capturing and analyzing network activity during dynamic analysis.
- **Process Hacker, Process Monitor (Procmon)**: Monitoring and recording malware-induced process activity.
- **RegShot**: Identifying and analyzing registry changes resulting from malware execution.
- **UPX**: Unpacking malware for deeper static analysis.

## Steps

*Ref 1: VirtualBox Installation and VM Setup*
- Installed VirtualBox and created a dedicated Windows 10 virtual machine for isolated malware analysis.

*Ref 2: Windows 10 Configuration*
- Installed Windows 10 on VM, configured security settings (disabled updates and Defender), and set up VM snapshots.

*Ref 3: Flare VM Installation*
- Downloaded and executed the Flare VM script to install essential malware analysis tools.

*Ref 4: Static Malware Analysis*
- Organized malware samples, identified file signatures using HxD, calculated file hashes, submitted samples to VirusTotal, and extracted readable strings.

*Ref 5: Malware Unpacking*
- Utilized UPX and PE Studio for unpacking malware samples, enabling further detailed examination.

*Ref 6: Dynamic Malware Analysis - Process Activity*
- Monitored malware execution using Process Monitor and Process Hacker to track processes and child processes.

*Ref 7: Dynamic Malware Analysis - Network Activity*
- Captured network traffic with Wireshark and Fiddler to detect suspicious network activities such as DNS queries and HTTP requests.

*Ref 8: Dynamic Malware Analysis - Registry and File System*
- Conducted registry analysis using RegShot and tracked malware persistence mechanisms through file system changes.

*Ref 9: Snapshot Restoration*
- Leveraged VirtualBox snapshot functionality to revert the VM to a clean state after malware analysis.

*Ref 10: Best Practices and Documentation*
- Followed cybersecurity best practices throughout the project, documented findings meticulously, and reinforced understanding through repeated lab exercises.

## Challenges and Solutions
- Encountered challenges configuring VirtualBox network settings. Resolved by ensuring correct settings (host-only adapter) to maintain isolation during dynamic analysis.
- Installation delays during Flare VM setup. Addressed by allocating sufficient resources (RAM, CPU cores) and ensuring stable network connections during lengthy installations.

## Insights and Observations
- Observed consistent use of packing and obfuscation techniques, highlighting the importance of thorough static analysis and unpacking tools.
- Detected significant registry and file system modifications indicating persistence mechanisms, emphasizing the need for comprehensive dynamic analysis.

## Future Improvements
- Explore automation scripts for repetitive setup and analysis tasks to improve efficiency.
- Consider integrating additional tools like Ghidra for deeper reverse engineering and binary analysis.

## Security Precautions
- Maintained strict isolation of the analysis environment using snapshots and network configuration.
- Utilized disposable VM snapshots to ensure no residual malware remained post-analysis.

